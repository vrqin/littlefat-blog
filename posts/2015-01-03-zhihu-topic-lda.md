title: 基于知乎的topic树对关键词提取的简单优化
description: 
category: python 
tag: python "machine learn"
-------------------------
关键词提取:即给定一个网页,一般里面是一篇文章,计算出这个页面的关键词
可以参考这个网站:http://www.tuicool.com/   这是一个完全由爬虫驱动的IT文章阅读网站,里面的文章来自于
众多网站http://www.tuicool.com/sites/hot , 然后自动按照用户关注的主题推荐给用户, 整个过按官方所述是几乎全部由程序得出,几乎没有人工干预.

jieba是pytho的一个中文分词库, 里面自带关键词提取功能,基于TextRank算法.
https://github.com/fxsjy/jieba/#3-%E5%85%B3%E9%94%AE%E8%AF%8D%E6%8F%90%E5%8F%96

然后下面这个地址可以找知乎的话题列表,
http://www.zhihu.com/topic/19776749/organize/entire#anchor-children-topic
然后写个爬虫可以很轻松把所有主题下载下来,结果有几十万个

结巴的关键词提取语料库是extra_dict/idf.txt.big 用记事本打开直接可以看到内容,格式如下
```
潛行 10.7226238216
作案 9.19114745066
化学剥蚀 12.5143832909
化學剝蝕 12.5143832909
呼拉尔 12.1089181827
呼拉爾 12.1089181827
赵弘殷 13.2075304714
趙弘殷 13.2075304714
王力宏 13.900677652
排起来 13.2075304714
排起來 13.2075304714
载体 8.28390655431
載體 8.28390655431
眼科 8.0600359946
厘订 11.598092559
釐訂 11.598092559
责任意识 10.2897597393
責任意識 10.2897597393
三派 11.3357282945
风水先生 10.8096351986
風水先生 10.8096351986
易释文 13.2075304714
易釋文 13.2075304714
灵渠 10.3171587135
靈渠 10.3171587135
游艺厅 13.2075304714
游藝廳 13.2075304714
赌徒 9.85762638414
賭徒 9.85762638414
油苗 13.900677652
斯泰因 11.598
```
这是一个IDF表(词频-逆文档频表)
每行后面代表该词的概率. 该概率的计算基于以下理论:
对区别文档最有意义的词语应该是那些在文档中出现频率高、而在整个语料库中的其他文档中出现频率少的词语。
具体可以参考:[TF-IDF模型的概率解释](http://coolshell.cn/articles/8422.html)
这个值越高,代表这个词在某篇文章出现了并越能反映这篇文章的主题.
然后我们就想办法把知乎的这个主题表利用起来.

可以简单的按照每个话题的级别指定概率，处于话题树的最底层，应该给予的概率越高。为了是结果明显，我给出的范围10-25， 意味着知乎大部分的话题概率都比结巴自带词库的高。
我写了一个简单的爬虫爬下来新浪的几篇博客(http://git.oschina.net/wkc/lda-learn/blob/master/sina-blog-download.py)，
然后这是用结巴自带词库的结果： http://git.oschina.net/wkc/lda-learn/blob/master/result_origin.txt
然后这是用知乎话题库的结果：
http://git.oschina.net/wkc/lda-learn/blob/master/result_zhihu.txt

再来个对照（格式说明:machine为算法结果，origi为博主自己加的标签）：
```
自带：
url: http://blog.sina.com.cn/s/blog_c6d19cf60102v9fg.html?tj=1
title: 李旭东：午评分析（12月10日）
machine:早盘 平开 cn 涨停 活跃 板块 每日 sina 传媒 早博 环保 强势 blog 收盘 旭东 10300.60 中瑞 com 个股 涨幅
origin:股票 李旭东 个股 涨停 午评

知乎：
url: http://blog.sina.com.cn/s/blog_c6d19cf60102v9fg.html?tj=1
title: 李旭东：午评分析（12月10日）
machine:管理 资本运作 基金 传媒 创始人 期货 投资 金融 创业板 黄金
origin:股票 李旭东 个股 涨停 午评


自带：
url: http://blog.sina.com.cn/s/blog_4a17027b0102v7i4.html?tj=1
title: 深扒《甄嬛传》十大美嫔艳妃婚恋现状
machine:蒋欣 姑姑 孙俪 热依扎 恋情 贵人 热播 现实 华妃 男友 戏份 婚恋 虽然 倍受 陈思斯 绯闻 蔡少芬 女友 张晓龙 妃嫔
origin:甄嬛传 妃嫔 婚恋 孙俪 蔡少芬

知乎：
url: http://blog.sina.com.cn/s/blog_4a17027b0102v7i4.html?tj=1
title: 深扒《甄嬛传》十大美嫔艳妃婚恋现状
machine:结婚 幸福 网店 节目 怀孕 演员
origin:甄嬛传 妃嫔 婚恋 孙俪 蔡少芬

```
可以看到结果好了很多， 我们成功以极小的成本优化了关键词提取算法的准确率。

代码：http://git.oschina.net/wkc/lda-learn/
